<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lilyfy – Busca e Download via API</title>
  <style>
    body { font-family: sans-serif; background:#111; color:#fff; margin:0; }
    .search { display:flex; padding:20px; gap:10px; }
    .search input { flex:1; padding:8px; border-radius:4px; border:none; }
    .search button { padding:8px 16px; background:#8a2be2; border:none; color:#fff; border-radius:4px; cursor:pointer; }
    .results { padding:20px; display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:20px; }
    .card { background:#222; border-radius:8px; padding:10px; display:flex; flex-direction:column; }
    .card img { width:100%; height:120px; object-fit:cover; border-radius:4px; }
    .card h3 { margin:10px 0 6px; font-size:16px; }
    .card p { font-size:14px; color:#aaa; margin:0 0 10px; flex:1; }
    .actions a { display:inline-block; margin-right:6px; color:#8a2be2; text-decoration:none; font-weight:bold; }
  </style>
</head>
<body>

<div class="search">
  <input type="text" id="query" placeholder="Buscar música, filme, app..."/>
  <button onclick="search()">Buscar</button>
</div>

<div class="results" id="results">Digite e clique em buscar.</div>

<script>
  const RAPID_KEY = 'be6d832346msh3bdcbc41a36e31fp1de253jsnfd355f97011f';
  const HOST = 'movie-games-music-web-series-apps-search-and-download.p.rapidapi.com';

  async function search() {
    const q = document.getElementById('query').value.trim();
    const resDiv = document.getElementById('results');
    resDiv.innerHTML = 'Carregando...';
    if (!q) { resDiv.textContent = 'Digite algo para buscar.'; return; }

    try {
      const resp = await fetch(`https://${HOST}/search/${encodeURIComponent(q)}`, {
        headers: {
          'X-Rapidapi-Key': RAPID_KEY,
          'X-Rapidapi-Host': HOST
        }
      });
      const data = await resp.json();
      // Ajuste conforme estrutura real do retorno
      const items = data.results || data.data || [];
      if (!items.length) { resDiv.textContent = 'Nenhum resultado encontrado.'; return; }

      resDiv.innerHTML = '';
      items.forEach(item => {
        const card = document.createElement('div');
        card.className = 'card';

        const title = item.title || item.name;
        const desc = item.description || item.type || '';
        const thumb = item.thumbnail || item.cover || '';

        const stream = item.streamUrl || item.downloadUrl;
        const download = item.downloadUrl || item.streamUrl;

        card.innerHTML = `
          ${thumb ? `<img src="${thumb}" alt="${title}">` : ''}
          <h3>${title}</h3>
          <p>${desc}</p>
          <div class="actions">
            ${stream ? `<a href="${stream}" target="_blank">▶︎ Ouvir/Assistir</a>` : ''}
            ${download ? `<a href="${download}" download>⬇️ Baixar</a>` : ''}
          </div>
        `;
        resDiv.appendChild(card);
      });
    } catch(err) {
      console.error(err);
      resDiv.textContent = 'Erro ao buscar. Veja o console.';
    }
  }
</script>

</body>
</html>
